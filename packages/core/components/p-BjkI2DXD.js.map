{"file":"p-BjkI2DXD.js","mappings":"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","names":["__stencil_proxyCustomElement","HTMLElement","fromEvent","debounceTime"],"sources":["src/components/je-popover/je-popover.css?tag=je-popover&encapsulation=shadow","src/components/je-popover/je-popover.tsx"],"sourcesContent":[":host {\n  display: contents;\n\n  --background: light-dark(rgb(233, 236, 236), rgb(41, 45, 46));\n  --color: light-dark(var(--je-neutral-900), var(--je-neutral-50));\n  --border: solid 1px light-dark(rgb(197, 200, 204), rgb(86, 87, 90));\n  --padding: var(--je-spacing-xs);\n}\n\n[part=content] {\n  position: relative;\n  width: var(--content-width, max-content);\n  max-width: var(--content-width, var(--available-width));\n  max-height: var(--content-height, var(--available-height));\n  z-index: 1;\n  border-radius: var(--je-radius-md);\n  border: var(--border);\n  overflow: auto;\n  font-family: inherit;\n  background-color: var(--background);\n  color: var(--color);\n  box-sizing: border-box;\n  padding: var(--padding);\n}\n\n[part=content-container] {\n  box-shadow: var(--je-shadow-lg);\n  opacity: 0;\n  transition:\n    opacity 0.3s ease-in-out,\n    display 0.3s ease-in-out allow-discrete;\n  background-color: transparent;\n  border: none;\n  border-radius: var(--je-radius-md);\n  padding: 0;\n  margin: 0;\n  box-sizing: border-box;\n  overflow: visible;\n}\n\n[part=content-container]:popover-open {\n  opacity: 1;\n}\n\n[part=arrow] {\n  position: absolute;\n  background-color: var(--background);\n  border: var(--border);\n  width: 10px;\n  height: 10px;\n\n  &.bottom,\n  &.bottom-end,\n  &.bottom-start {\n    transform: translateY(-50%) rotate(45deg);\n    top: 0;\n  }\n\n  &.top,\n  &.top-end,\n  &.top-start {\n    transform: translateY(50%) rotate(45deg);\n    bottom: 0;\n  }\n\n  &.left,\n  &.left-end,\n  &.left-start {\n    transform: translateX(50%) rotate(45deg);\n    right: 0;\n  }\n\n  &.right,\n  &.right-end,\n  &.right-start {\n    transform: translateX(-50%) rotate(45deg);\n    left: 0;\n  }\n}\n\n@starting-style {\n  [part=content-container]:popover-open {\n    opacity: 0;\n  }\n}\n","import { Component, Host, h, Element, EventEmitter, Listen, Prop, Event, Watch, Method } from '@stencil/core';\nimport { arrow, autoPlacement, autoUpdate, computePosition, ComputePositionReturn, flip, offset, Placement, shift, size } from '@floating-ui/dom';\nimport { debounceTime, fromEvent, Subscription } from 'rxjs';\n\n@Component({\n  tag: 'je-popover',\n  styleUrl: 'je-popover.css',\n  shadow: true,\n})\nexport class JePopover {\n  @Element() el!: HTMLJePopoverElement;\n\n  private contentEl!: HTMLElement;\n\n  private containerEl!: HTMLElement;\n\n  private arrowEl?: HTMLElement;\n\n  private get triggerElement() {\n    return this.el.querySelector(':scope > [slot=trigger]');\n  }\n\n  private mouseEvent?: MouseEvent;\n\n  private role?: string;\n\n  private data?: any;\n\n  private cleanup?: () => void;\n\n  private get referenceEl() {\n    return {\n      getBoundingClientRect: () => {\n        if (this.positionStrategy === 'element') {\n          return (this.triggerElement ?? this.mouseEvent?.target as Element).getBoundingClientRect()\n        } else {\n          return new DOMRect(this.mouseEvent?.clientX, this.mouseEvent?.clientY)\n        }\n      }\n    };\n  }\n\n  private mouseSub?: Subscription;\n\n  /**\n   * Opens/closes the popover\n   */\n  @Prop({ mutable: true }) open = false;\n\n  /**\n   * Where the popover should be placed\n   */\n  @Prop() placement?: Placement;\n\n  /** Backdrop will dismiss the popover on click when enabled */\n  @Prop() backdropDismiss = true;\n\n  /**\n   * Popover will automatically dismiss itself when something is\n   * clicked in the popover when enabled\n   */\n  @Prop() dismissOnClick = false;\n\n  /**\n   * If the popover should position itself using the mouse event or\n   * the triggerElement.\n   */\n  @Prop() positionStrategy: 'click' | 'element' = 'element';\n\n  /** Horizontal offset used when auto positioning the popover content */\n  @Prop() offsetX = 0;\n\n  /** Vertical offset used when auto positioning the popover content */\n  @Prop() offsetY = 10;\n\n  /**\n   * @click Popover will show on left click or tap on mobile.\n   * @context-menu Popover will show on right click or press on mobile.\n   * @hover Popover will show on hover or tap on mobile.\n   */\n  @Prop() triggerAction: 'click' | 'context-menu' | 'hover' = 'click';\n\n  /**\n   * If the popover should match the width of the trigger element\n   */\n  @Prop() matchWidth = false;\n\n  /**\n   * Renders an arrow pointing to the trigger\n   */\n  @Prop() arrow = true;\n\n  /**\n   * Execute a callback before the popover starts presenting\n   */\n  @Prop() init?: () => Promise<void> | void;\n\n  /**\n   * Execute a callback after the popover has dismissed\n   */\n  @Prop() destroy?: () => Promise<void> | void;\n\n  /**\n   * The padding between the arrow and the edges of the popover. Useful if you change the border-radius of the popover\n   */\n  @Prop() arrowPadding = 6;\n\n  /**\n   * Emits before the popover starts opening\n   */\n  @Event({ bubbles: false }) willPresent: EventEmitter;\n\n  /**\n   * Emits when the popover is opened\n   */\n  @Event({ bubbles: false }) present: EventEmitter;\n\n  /**\n   * Emits when the popover is closed\n   */\n  @Event({ bubbles: false }) dismiss: EventEmitter;\n\n  /**\n   * Emits before the popover starts dismissing\n   */\n  @Event({ bubbles: false }) willDismiss: EventEmitter;\n\n  /**\n   * Emits when the popover has completed it's initial render\n   */\n  @Event({ bubbles: false }) ready: EventEmitter;\n\n  componentDidLoad() {\n    this.ready.emit();\n  }\n\n  componentWillRender() {\n    if (this.triggerElement && this.matchWidth) {\n      this.el.style.setProperty('--content-width', `${this.triggerElement.clientWidth}px`);\n    }\n  }\n\n  connectedCallback() {\n    this.mouseSub = fromEvent(window, 'mousemove')\n      .pipe(debounceTime(25))\n      .subscribe(this.onMouseMove)\n  }\n\n  disconnectedCallback() {\n    this.mouseSub?.unsubscribe();\n  }\n\n  @Watch('open')\n  async handleOpenChange(open: boolean) {\n    if (open) {\n      this.willPresent.emit();\n      if (this.init) {\n        await this.init();\n      }\n      this.setPosition(await this.computePosition());\n      this.cleanup = autoUpdate(this.referenceEl, this.containerEl, () => this.computePosition().then(this.setPosition));\n      this.containerEl.showPopover();\n    } else {\n      this.willDismiss.emit();\n      if (this.cleanup) {\n        this.cleanup();\n      }\n      this.containerEl.hidePopover();\n    }\n  }\n\n  @Listen('click', { capture: true, target: 'window' })\n  handleWindowClick(ev: MouseEvent) {\n    const path = ev.composedPath();\n    if (this.triggerAction == 'click') {\n      if (this.open) {\n        if (this.backdropDismiss && !path.includes(this.containerEl)) {\n          this.hide('backdropDismiss')\n          this.open = false;\n        }\n\n        if (this.dismissOnClick && path.includes(this.containerEl)) {\n          this.open = false;\n          this.hide('clickDismiss')\n        }\n      } else {\n        this.mouseEvent = ev;\n        if (path.includes(this.triggerElement)) {\n          this.open = true;\n        }\n      }\n    }\n  }\n\n  @Listen('contextmenu', { capture: true, target: 'window' })\n  handleWindowContextMenu(ev: MouseEvent) {\n    const path = ev.composedPath();\n    if (this.triggerAction == 'context-menu' && !this.open) {\n      this.mouseEvent = ev;\n      if (path.includes(this.triggerElement)) {\n        ev.preventDefault();\n        this.open = true;\n      }\n    }\n  }\n\n  @Method()\n  async show() {\n    this.open = true;\n  }\n\n  @Method()\n  async hide(role?: string, data?: any) {\n    this.role = role;\n    this.data = data;\n    this.open = false;\n  }\n\n  private setPosition = ({ x, y, middlewareData, placement }: ComputePositionReturn) => {\n    if (middlewareData.arrow) {\n      this.arrowEl.removeAttribute('class');\n      this.arrowEl.classList.add(placement);\n      if (middlewareData.arrow.x) {\n        this.arrowEl.style.left = `${middlewareData.arrow.x}px`;\n      } else if (middlewareData.arrow.y) {\n        this.arrowEl.style.top = `${middlewareData.arrow.y}px`;\n      }\n    }\n    this.containerEl.style.left = `${x}px`;\n    this.containerEl.style.top = `${y}px`;\n  }\n\n  private onMouseMove = (ev: MouseEvent) => {\n    const node = ev.target as Node;\n    const { triggerAction, triggerElement, el } = this;\n    if (triggerAction === 'hover') {\n      if ((triggerAction === 'hover' && (el.contains(node) || triggerElement?.contains(node)))) {\n        this.mouseEvent = ev;\n        this.open = true;\n      } else {\n        this.hide('hoverDismiss')\n      }\n    }\n  };\n\n  private computePosition() {\n    return computePosition(this.referenceEl, this.containerEl, {\n      placement: this.placement,\n      strategy: 'fixed',\n      middleware: [\n        offset({\n          mainAxis: this.offsetY,\n          crossAxis: this.offsetX,\n        }),\n        shift(),\n        this.placement ? flip() : autoPlacement(),\n        size({\n          apply: ({ availableHeight, availableWidth }) => {\n            this.contentEl.style.setProperty('--available-height', `${availableHeight - this.offsetY}px`);\n            this.contentEl.style.setProperty('--available-width', `${availableWidth - this.offsetX}px`);\n          },\n        }),\n        this.arrowEl\n          ? arrow({\n            element: this.arrowEl,\n            padding: this.arrowPadding,\n          })\n          : false,\n      ],\n    })\n  }\n\n  private handleContentTransitionEnd = async (ev: TransitionEvent) => {\n    if (ev.propertyName == 'opacity') {\n      await new Promise(resolve => setTimeout(resolve, 300));\n      if (!this.open) {\n        if (this.destroy) {\n          await this.destroy();\n        }\n        this.dismiss.emit({ role: this.role ?? 'manualClose', data: this.data });\n        this.role = undefined;\n        this.data = undefined;\n      } else {\n        this.present.emit();\n      }\n    }\n  };\n\n  render() {\n    return (\n      <Host>\n        <slot name=\"trigger\" />\n        <div part=\"content-container\" ref={el => this.containerEl = el} onTransitionStart={this.handleContentTransitionEnd} popover='manual'>\n          <div ref={el => this.contentEl = el} part=\"content\">\n            <slot />\n          </div>\n          {this.arrow && <div ref={el => this.arrowEl = el} part=\"arrow\"></div>}\n        </div>\n      </Host>\n    );\n  }\n}\n"],"version":3}