{"file":"index.js","mappings":"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","names":[],"sources":["src/utils/create-dialog.ts","src/utils/create-toast.ts","src/utils/input-mask.ts"],"sourcesContent":["import { Color } from \"./color\";\n\nexport type DialogControl = {\n  label?: string;\n  placeholder?: string;\n  validators?: HTMLJeTextfieldElement['validate'];\n  required?: boolean;\n  type?: string;\n  originalValue?: string;\n  value?: string;\n  name?: string;\n  debounce?: number;\n  valueChangeHandler?: (input: any) => void | Promise<void>;\n};\n\nexport type DialogButton = {\n  text?: string;\n  fill?: 'solid' | 'outline' | 'clear';\n  color?: Color;\n  type?: 'submit' | 'reset';\n  size?: 'sm' | 'md' | 'lg';\n  handler?: (dialog: HTMLJeOverlayElement) => void | Promise<void>;\n};\n\nexport type CreateDialogOptions = {\n  header?: string,\n  message?: string,\n  icon?: string,\n  buttons?: DialogButton[];\n  controls?: DialogControl[],\n  backdropDismiss?: boolean\n}\n\nexport const createDialog = (options: CreateDialogOptions) => {\n  const dialog = document.createElement('je-overlay');\n  dialog.size = 'sm';\n  dialog.setHTMLUnsafe(`\n    <je-form>\n      <div class=\"je-dialog-container\">\n        <template shadowrootmode=\"open\">\n          <style>\n            :host {\n              display: flex;\n              flex-direction: column;\n              gap: 1rem;\n              padding: 1rem;\n              box-sizing: border-box;\n            }\n          </style>\n          <je-toolbar>\n            <slot name=\"icon\"></slot>\n            <slot name=\"header\"></slot>\n            <je-button slot=\"end\">\n              <je-icon>close</je-icon\n            </je-button>\n          </je-toolbar>\n          <slot name=\"message\"></slot>\n          <slot name=\"controls\"></slot>\n          <slot name=\"buttons\"></slot>\n        </template>\n      </div>\n    </je-form>\n  `)\n  dialog.backdropDismiss = options.backdropDismiss;\n  document.body.append(dialog);\n  const container = dialog.querySelector('.je-dialog-container')\n  if (options.header) {\n    container.insertAdjacentHTML('afterbegin', `\n      <h3 slot=\"header\">${options.header}</h3>\n    `)\n  }\n  if (options.message) {\n    container.insertAdjacentHTML('beforeend', `\n      <je-label slot=\"message\">${options.message}</je-label>\n    `)\n  }\n  if (options.icon) {\n    container.insertAdjacentHTML('afterbegin', `\n      <je-icon fill slot=\"icon\">${options.icon}</je-icon>\n    `)\n  }\n  if (options.controls) {\n    container.insertAdjacentHTML('beforeend', `\n      <div slot=\"controls\" class=\"je-dialog-controls\"></div>\n    `)\n    const controls = container.querySelector('.je-dialog-controls');\n    options.controls.forEach(control => {\n      const input = document.createElement('je-textfield');\n      input.label = control.label;\n      input.placeholder = control.placeholder;\n      //input.validators = control.validators;\n      input.required = control.required;\n      //input.type = control.type;\n      input.setAttribute('name', control.name)\n      input.originalValue = control.originalValue;\n      input.value = control.value;\n      input.debounce = control.debounce;\n      input.addEventListener('valueChange', control.valueChangeHandler);\n      controls.append(input);\n    })\n  }\n  if (options.buttons) {\n    container.insertAdjacentHTML('beforeend', `\n      <je-toolbar slot=\"buttons\" class=\"je-dialog-buttons\"></je-toolbar>\n    `)\n    const buttons = container.querySelector('.je-dialog-buttons');\n    options.buttons.forEach(button => {\n      const btn = document.createElement('je-button');\n      btn.textContent = button.text;\n      btn.fill = button.fill;\n      btn.color = button.color;\n      btn.type = button.type;\n      btn.size = button.size;\n      btn.slot = 'end';\n      if (button.handler) btn.addEventListener('click', () => button.handler(dialog));\n      buttons.append(btn);\n    })\n  }\n  const closeButton = container.shadowRoot.querySelector('je-button')\n  closeButton.addEventListener('click', () => dialog.hide(), { once: true });\n  const form = dialog.querySelector('je-form');\n  form.addEventListener('submit', () => dialog.hide(), { once: true });\n  dialog.addEventListener('dismiss', () => dialog.remove(), { once: true });\n  return [dialog, form] as const;\n}\n","import { Color } from \"./color\";\n\nexport type CreateToastOptions = {\n  color?: Color;\n  duration?: number;\n  closable?: boolean;\n  position?: 'top' | 'bottom' | 'top-start' | 'top-end' | 'bottom-start' | 'bottom-end';\n  buttons?: {\n    text?: string;\n    fill?: 'solid' | 'outline' | 'clear';\n    color?: Color;\n    size?: 'sm' | 'md' | 'lg';\n    handler?: (toast: HTMLJeAlertElement) => void | Promise<void>;\n  }[];\n};\n\nexport const createToast = (options: CreateToastOptions) => {\n  const toast = document.createElement('je-alert');\n  toast.color = options.color;\n  toast.duration = options.duration;\n  toast.closable = options.closable;\n  if (options.buttons) {\n    options.buttons.forEach(button => {\n      const btn = document.createElement('je-button');\n      btn.textContent = button.text;\n      btn.fill = button.fill;\n      btn.color = button.color;\n      btn.size = button.size ?? 'sm';\n      btn.slot = 'buttons';\n      if (button.handler) btn.addEventListener('click', () => button.handler(toast));\n      toast.append(btn);\n    })\n  }\n  let container = document.querySelector<HTMLDivElement>(`div.je-toast-container[data-position=${options.position}]`);\n  if (!container) {\n    container = document.createElement('div');\n    container.dataset.position = options.position;\n    document.body.append(container);\n    container.popover = 'manual';\n    //needs mutation observer\n  }\n\n  container.append(toast)\n  toast.didDismiss().then(() => {\n    toast.remove()\n  })\n  return toast;\n}\n","export interface InputMaskOptions {\n  inputElement: HTMLInputElement | HTMLElement\n  formatter: (str: string) => string\n  extractor?: (str: string) => string\n  masker?: (rawValue: string, formattedValue: string) => string\n}\n\nexport class InputMask {\n  private element: HTMLInputElement | HTMLElement\n  private isContentEditable: boolean\n  private formatter: (str: string) => string\n  private extractor: (str: string) => string\n  private masker?: (rawValue: string, formattedValue: string) => string\n  private rawValue: string\n  private formattedValue: string\n\n  constructor({ inputElement, formatter, extractor = val => val, masker }: InputMaskOptions) {\n    this.element = inputElement\n    this.isContentEditable = inputElement instanceof HTMLElement && inputElement.isContentEditable\n    this.formatter = formatter\n    this.extractor = extractor\n    this.masker = masker\n\n    this.rawValue = this.extractor(this.getValue());\n    this.formattedValue = this.formatter(this.rawValue);\n    this.setValue(this.getDisplayValue());\n\n    this.element.addEventListener(\"keydown\", this.handleKeyDown);\n    this.element.addEventListener(\"input\", this.handleInput);\n  }\n\n  private getValue(): string {\n    if (this.isContentEditable) {\n      return (this.element as HTMLElement).textContent || '';\n    }\n    return (this.element as HTMLInputElement).value;\n  }\n\n  private setValue(value: string) {\n    if (this.isContentEditable) {\n      (this.element as HTMLElement).textContent = value;\n    } else {\n      (this.element as HTMLInputElement).value = value;\n    }\n  }\n\n  private getCursorPosition(): number | null {\n    if (this.isContentEditable) {\n      const selection = window.getSelection();\n      if (!selection || selection.rangeCount === 0) return null;\n\n      const range = selection.getRangeAt(0);\n      const preCaretRange = range.cloneRange();\n      preCaretRange.selectNodeContents(this.element);\n      preCaretRange.setEnd(range.endContainer, range.endOffset);\n      return preCaretRange.toString().length;\n    }\n    return (this.element as HTMLInputElement).selectionStart;\n  }\n\n  private getSelectionEnd(): number | null {\n    if (this.isContentEditable) {\n      const selection = window.getSelection();\n      if (!selection || selection.rangeCount === 0) return null;\n\n      const range = selection.getRangeAt(0);\n      const preCaretRange = range.cloneRange();\n      preCaretRange.selectNodeContents(this.element);\n      preCaretRange.setEnd(range.endContainer, range.endOffset);\n      return preCaretRange.toString().length;\n    }\n    return (this.element as HTMLInputElement).selectionEnd;\n  }\n\n  private getDisplayValue(): string {\n    if (this.masker) {\n      return this.masker(this.rawValue, this.formattedValue);\n    }\n    return this.formattedValue;\n  }\n\n  private handleKeyDown = (e: KeyboardEvent) => {\n    if (e.key === \"Backspace\" || e.key === \"Delete\") {\n      const cursorPos = this.getCursorPosition();\n      const selectionEnd = this.getSelectionEnd();\n\n      if (cursorPos === null || selectionEnd === null) return;\n\n      // If there's a selection, let it handle normally\n      if (cursorPos !== selectionEnd) {\n        return;\n      }\n\n      // Use formattedValue (not the masked display) for logic\n      const valueToCheck = this.formattedValue;\n\n      // Check if we're about to delete a formatting character\n      if (e.key === \"Backspace\" && cursorPos > 0) {\n        const beforeSubstring = valueToCheck.substring(0, cursorPos - 1);\n        const atSubstring = valueToCheck.substring(0, cursorPos);\n\n        const beforeRaw = this.extractor(beforeSubstring);\n        const atRaw = this.extractor(atSubstring);\n\n        // If the character before cursor is a formatting character\n        if (beforeRaw.length === atRaw.length) {\n          e.preventDefault();\n          this.deleteRawCharacter(\"backspace\", cursorPos);\n        }\n      } else if (e.key === \"Delete\" && cursorPos < valueToCheck.length) {\n        const atSubstring = valueToCheck.substring(0, cursorPos);\n        const afterSubstring = valueToCheck.substring(0, cursorPos + 1);\n\n        const atRaw = this.extractor(atSubstring);\n        const afterRaw = this.extractor(afterSubstring);\n\n        // If the character after cursor is a formatting character\n        if (atRaw.length === afterRaw.length) {\n          e.preventDefault();\n          this.deleteRawCharacter(\"delete\", cursorPos);\n        }\n      }\n    }\n  }\n\n  private deleteRawCharacter(direction: string, cursorPos: number) {\n    const rawPos = this.getRawCursorPosition(this.formattedValue, cursorPos);\n\n    // Delete from raw value\n    if (direction === \"backspace\" && rawPos > 0) {\n      this.rawValue =\n        this.rawValue.slice(0, rawPos - 1) + this.rawValue.slice(rawPos);\n      this.updateAndPosition(rawPos - 1);\n    } else if (direction === \"delete\" && rawPos < this.rawValue.length) {\n      this.rawValue =\n        this.rawValue.slice(0, rawPos) + this.rawValue.slice(rawPos + 1);\n      this.updateAndPosition(rawPos);\n    }\n  }\n\n  private updateAndPosition(targetRawPos: number) {\n    this.formattedValue = this.formatter(this.rawValue);\n    this.setValue(this.getDisplayValue());\n\n    const newCursorPos = this.getFormattedCursorPosition(targetRawPos);\n    this.setCursor(newCursorPos);\n  }\n\n  private handleInput = () => {\n    const cursorPos = this.getCursorPosition();\n    if (cursorPos === null) return;\n\n    const inputValue = this.getValue();\n    const prevDisplayValue = this.getDisplayValue();\n\n    // When masking is enabled, we need to extract from the actual characters typed\n    // not the masked display. We'll track what actually changed.\n    let newRawValue: string;\n\n    if (this.masker) {\n      // Get raw cursor position before the change\n      const prevRawCursorPos = this.getRawCursorPosition(this.formattedValue, cursorPos);\n\n      if (inputValue.length > prevDisplayValue.length) {\n        // User added characters - extract the new characters\n        const diff = inputValue.length - prevDisplayValue.length;\n        const typedChars = inputValue.substring(cursorPos - diff, cursorPos);\n        const extractedTyped = this.extractor(typedChars);\n\n        // Insert into raw value at cursor position\n        const candidateRawValue =\n          this.rawValue.slice(0, prevRawCursorPos) +\n          extractedTyped +\n          this.rawValue.slice(prevRawCursorPos);\n\n        // Format to see what actually gets accepted\n        const formattedCandidate = this.formatter(candidateRawValue);\n        // Extract back to get the actual raw value that will be used\n        newRawValue = this.extractor(formattedCandidate);\n      } else if (inputValue.length < prevDisplayValue.length) {\n        // User deleted characters\n        const diff = prevDisplayValue.length - inputValue.length;\n\n        // Delete from raw value at cursor position\n        newRawValue =\n          this.rawValue.slice(0, prevRawCursorPos) +\n          this.rawValue.slice(prevRawCursorPos + diff);\n      } else {\n        // No length change\n        newRawValue = this.rawValue;\n      }\n    } else {\n      // Original behavior for non-masked inputs\n      newRawValue = this.extractor(inputValue);\n    }\n\n    // Calculate cursor position in terms of raw characters\n    const rawCursorPos = this.masker\n      ? this.extractor(this.formattedValue.substring(0, cursorPos)).length\n      : this.getRawCursorPosition(inputValue, cursorPos);\n    // Determine what changed in the raw value\n    const rawDiff = newRawValue.length - this.rawValue.length;\n\n    // Update stored raw value\n    this.rawValue = newRawValue;\n\n    // Apply formatting\n    this.formattedValue = this.formatter(this.rawValue);\n    this.setValue(this.getDisplayValue());\n\n    // Calculate new cursor position\n    let newCursorPos = this.getFormattedCursorPosition(rawCursorPos + (rawDiff > 0 ? rawDiff : 0));\n\n    // If we're adding characters, move cursor forward past any formatting\n    if (rawDiff > 0) {\n      // Make sure cursor is after the newly typed character(s)\n      newCursorPos = this.findNextRawCharPosition(newCursorPos);\n    }\n\n    // Set cursor position\n    this.setCursor(newCursorPos);\n  }\n  private getRawCursorPosition(formattedValue: string, cursorPos: number) {\n    // Count how many \"raw\" characters are before the cursor\n    const extracted = this.extractor(formattedValue.substring(0, cursorPos));\n    return extracted.length;\n  }\n\n  private getFormattedCursorPosition(rawPos: number) {\n    // Find the formatted position that corresponds to the raw position\n    if (rawPos === 0) return 0;\n    if (rawPos >= this.rawValue.length) return this.formattedValue.length;\n    for (let i = 0; i < this.formattedValue.length; i++) {\n      const charUpToHere = this.extractor(\n        this.formattedValue.substring(0, i + 1)\n      );\n      if (charUpToHere.length >= rawPos) {\n        return i + 1;\n      }\n    }\n\n    return this.formattedValue.length;\n  }\n\n  private findNextRawCharPosition(startPos: number) {\n    // Move cursor forward until we're right after a raw character\n    // This handles cases where formatting characters are inserted\n    for (let i = startPos; i <= this.formattedValue.length; i++) {\n      const beforeExtracted = this.extractor(\n        this.formattedValue.substring(0, i - 1)\n      );\n      const atExtracted = this.extractor(this.formattedValue.substring(0, i));\n\n      if (atExtracted.length > beforeExtracted.length) {\n        return i;\n      }\n    }\n    return startPos;\n  }\n\n  private setCursor(position: number) {\n    requestAnimationFrame(() => {\n      if (this.isContentEditable) {\n        const selection = window.getSelection();\n        if (!selection) return;\n\n        const range = document.createRange();\n        let currentPos = 0;\n        let found = false;\n\n        const traverse = (node: Node) => {\n          if (found) return;\n\n          if (node.nodeType === Node.TEXT_NODE) {\n            const textLength = node.textContent?.length || 0;\n            if (currentPos + textLength >= position) {\n              range.setStart(node, position - currentPos);\n              range.setEnd(node, position - currentPos);\n              found = true;\n              return;\n            }\n            currentPos += textLength;\n          } else {\n            for (let i = 0; i < node.childNodes.length; i++) {\n              traverse(node.childNodes[i]);\n              if (found) return;\n            }\n          }\n        };\n\n        traverse(this.element);\n\n        if (found) {\n          selection.removeAllRanges();\n          selection.addRange(range);\n        }\n      } else {\n        (this.element as HTMLInputElement).setSelectionRange(position, position);\n      }\n    });\n  }\n\n  [Symbol.dispose]() {\n    this.element.removeEventListener(\"keydown\", this.handleKeyDown);\n    this.element.removeEventListener(\"input\", this.handleInput);\n  }\n}\n\n"],"version":3}