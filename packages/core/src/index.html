<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
<title>Jebamo Component Library</title>

<script type="module" src="/build/jebamo.esm.js"></script>
<script nomodule src="/build/jebamo.js"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap');

  @font-face {
    font-family: 'Material Symbols Rounded';
    font-style: normal;
    font-weight: 100 700;
    src: url(https://fonts.gstatic.com/s/materialsymbolsrounded/v206/sykg-zNym6YjUruM-QrEh7-nyTnjDwKNJ_190FjzaqkNCeE.woff2) format('woff2');
  }

  je-page {
    --font-family: "Work Sans";
  }

  html,
  body {
    height: 100vh;
    width: 100vw;
    overflow: hidden;
    margin: 0;
    padding: 0;
  }
</style>
</head>

<body>
  <je-page id="main-page" left-panel="minimized" right-panel="open">
    <je-toolbar style="--background-color: var(--je-primary-800); --color: var(--je-primary-100); padding-inline: var(--padding);" slot="header">
      <je-button slot="start" fill="clear" icon-only="true" color="light">
        <je-icon icon="menu"></je-icon>
      </je-button>
      <h1>Jebamo</h1>
      <je-button size="sm" onclick="handleThemeToggle()" color="light" slot="end">Toggle theme</je-button>
      <je-button size="sm" onclick="handlePanelToggle('left')" color="light" slot="end">Toggle left panel</je-button>
      <je-button size="sm" onclick="handlePanelToggle('right')" color="light" slot="end">Toggle right panel</je-button>
    </je-toolbar>
    <div style="padding: var(--padding); display: flex; flex-direction: column; gap: var(--gap-lg);" slot="left-panel">
      <je-button icon-only expand>
        <je-icon fill icon="home"></je-icon>
      </je-button>
      <je-button icon-only expand>
        <je-icon fill icon="inbox"></je-icon>
      </je-button>
      <je-button icon-only expand>
        <je-icon fill icon="apps"></je-icon>
      </je-button>
      <je-button icon-only expand>
        <je-icon fill icon="favorite"></je-icon>
      </je-button>
    </div>
    <div slot="body" style="padding: var(--padding-lg);">
      <h2>Buttons</h2>
      <div style="display: flex; flex-direction: column; gap: var(--gap); margin-bottom: var(--margin);">
        <div style="display: flex; gap: var(--gap);">
          <je-button>solid</je-button>
          <je-button fill="outline">outline</je-button>
          <je-button fill="clear">clear</je-button>
        </div>
        <div style="display: flex; gap: var(--gap);">
          <je-button color="secondary">solid</je-button>
          <je-button fill="outline" color="secondary">outline</je-button>
          <je-button fill="clear" color="secondary">clear</je-button>
        </div>
        <div style="display: flex; gap: var(--gap);">
          <je-button color="tertiary">solid</je-button>
          <je-button fill="outline" color="tertiary">outline</je-button>
          <je-button fill="clear" color="tertiary">clear</je-button>
        </div>
        <div style="display: flex; gap: var(--gap);">
          <je-button color="error">solid</je-button>
          <je-button fill="outline" color="error">outline</je-button>
          <je-button fill="clear" color="error">clear</je-button>
        </div>
        <div style="display: flex; gap: var(--gap);">
          <je-button color="warning">solid</je-button>
          <je-button fill="outline" color="warning">outline</je-button>
          <je-button fill="clear" color="warning">clear</je-button>
        </div>
        <div style="display: flex; gap: var(--gap);">
          <je-button color="success">solid</je-button>
          <je-button fill="outline" color="success">outline</je-button>
          <je-button fill="clear" color="success">clear</je-button>
        </div>
        <div style="display: flex; gap: var(--gap);">
          <je-button color="medium">solid</je-button>
          <je-button fill="outline" color="medium">outline</je-button>
          <je-button fill="clear" color="medium">clear</je-button>
        </div>
        <div style="display: flex; gap: var(--gap);">
          <je-button color="light">solid</je-button>
          <je-button fill="outline" color="light">outline</je-button>
          <je-button fill="clear" color="light">clear</je-button>
        </div>
        <div style="display: flex; gap: var(--gap);">
          <je-button color="dark">solid</je-button>
          <je-button fill="outline" color="dark">outline</je-button>
          <je-button fill="clear" color="dark">clear</je-button>
        </div>
        <je-button>This is a lot of text that wraps to the next line</je-button>
        <je-button size="sm">small</je-button>
        <je-button size="lg">large</je-button>
        <je-button fill="clear" icon-only="true">
          <je-icon icon="search"></je-icon>
        </je-button>
        <je-button>
          <je-icon fill icon="home"></je-icon> Home
        </je-button>
      </div>

      <h2>Input as searchbar</h2>
      <div style="gap: var(--gap); display: flex; flex-direction: column;">
        <je-input placeholder="Search for a client...">
          <je-icon icon="search" fill slot="start"></je-icon>
        </je-input>
      </div>

      <h2>Popover</h2>
      <je-button id="popoverButton">Popover</je-button>
      <je-popover trigger="popoverButton">
        <p>Hello! This is popover text.</p>
      </je-popover>

      <h2>Modal</h2>
      <je-button id="modalButton">modal</je-button>
      <je-modal trigger="modalButton">
        <p>Hello! This is modal text.</p>
      </je-modal>

      <h2>Loading Indicators</h2>
      <je-loading></je-loading>
      <je-skeleton-text style="height: 40px; width: 300px;"></je-skeleton-text>
    </div>
    <div style="padding: var(--padding);" slot="right-panel">
      <h2>Example Form</h2>
      <je-form id="form">
        <je-input label="Name" placeholder="What's your name?" expand="true"></je-input>
        <je-select expand label="Day" placeholder="Select a day of the week">
          <je-select-option value="1">Monday</je-select-option>
          <je-select-option value="2">Tuesday</je-select-option>
          <je-select-option value="3">Wednesday</je-select-option>
          <je-select-option value="4">Thursday</je-select-option>
          <je-select-option value="5">Friday</je-select-option>
          <je-select-option value="6">Saturday</je-select-option>
          <je-select-option value="7">Sunday</je-select-option>
        </je-select>
        <je-input required label="Password" type="password" placeholder="Type your password" expand="true"></je-input>
        <je-input type="number" required id="customInput" label="Custom Validator" helper-text="Enter a number between 4 and 12" expand="true"></je-input>
        <je-input id="customFormatter" name="phone" type="tel" autocomplete="phone" placeholder="Type your phone" label="Custom Formatter" expand="true">
          <je-icon icon="phone" fill slot="end"></je-icon>
        </je-input>
        <je-button type="submit">Submit</je-button>
        <je-button type="reset">Reset</je-button>
      </je-form>
      <je-alert id="formAlert"></je-alert>
    </div>
    <div style="background-color: var(--je-primary-800); color: var(--je-primary-100); padding-inline: var(--padding);" slot="footer">
      <h1>Footer</h1>
    </div>
  </je-page>
  <script>
    const customInputEl = document.getElementById('customInput')
    customInputEl.validators = [
      (val) => {
        let errors = [];
        const num = Number(val);
        if (num <= 4) {
          errors.push('Value must be greater than 4')
        }
        if (num >= 12) {
          errors.push('Value must be less than 12')
        }
        return errors;
      }
    ]
    customInputEl.addEventListener('valueChange', (ev) => console.log(ev.detail, typeof ev.detail))

    const customFormatterEl = document.getElementById('customFormatter');
    customFormatterEl.format = input => {
      const phoneNumber = input?.replace(/\D/g, '') ?? ''; // Remove all non-digit characters
      let formattedNumber = '';

      if (phoneNumber.length <= 7) {
        // Format as XXX-XXXX (no area code)
        if (phoneNumber.length > 3) {
          formattedNumber += `${phoneNumber.substring(0, 3)}-${phoneNumber.substring(3, 7)}`;
        } else {
          formattedNumber += phoneNumber;
        }
      } else {
        // Format as (XXX) XXX-XXXX
        // Add area code part
        if (phoneNumber.length > 0) {
          formattedNumber += `(${phoneNumber.substring(0, 3)}`;
        }
        if (phoneNumber.length >= 3) {
          formattedNumber += `) `;
        }

        // Add the first three digits
        if (phoneNumber.length > 3) {
          formattedNumber += `${phoneNumber.substring(3, 6)}`;
        }
        if (phoneNumber.length >= 6) {
          formattedNumber += `-`;
        }

        // Add the last four digits
        if (phoneNumber.length > 6) {
          formattedNumber += `${phoneNumber.substring(6, 10)}`;
        }
      }

      return formattedNumber;
    };

    function handlePanelToggle(side) {
      const el = document.getElementById('main-page')
      if (side == 'left') {
        const panelState = el.leftPanel;
        el.leftPanel = panelState === 'open' ? 'minimized' : 'open';
      } else {
        const panelState = el.rightPanel;
        el.rightPanel = panelState === 'open' ? 'closed' : 'open';
      }
    }

    function handleThemeToggle() {
      const el = document.getElementById('main-page')
      const themeState = el.theme;
      el.theme = themeState == 'light' ? 'dark' : 'light'
    }

    const formEl = document.getElementById('form');
    formEl.addEventListener('submit', ev => {
      var dialogElement = document.getElementById("formAlert");
      dialogElement.header = "Form Submitted!";
      dialogElement.message = "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua";
      dialogElement.buttons = [
        { text: 'Cancel', fill: 'outline', handler: () => console.log('clicked') },
        { text: 'Ok', fill: 'solid', handler: () => console.log('clicked') }
      ]
      dialogElement.present();
    })
    formEl.onformdata = e => {
      const data = e.formData;
      console.log(data.get('password'))
    };
  </script>
</body>

</html>
